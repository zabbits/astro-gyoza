---
import { getCollection } from 'astro:content'
import PageLayout from '@/layouts/PageLayout.astro'
import { getFormattedDate } from '@/utils/date'
import { render } from 'astro:content'

const memos = (await getCollection('miscellanea')).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
)

const title = '杂记'
---

<PageLayout title={title}>
  <div class="max-w-[1000px] mx-auto px-4 md:px-8 py-16">
    <div class="mt-12">
      <div class="flex flex-col gap-12">
        {memos.map(async (memo) => {
          const { Content } = await render(memo)
          return (
                      <div class="relative flex items-start">
                        <div class="absolute left-[3.5px] top-1 h-full w-px bg-zinc-200 dark:bg-zinc-800"></div>
                        <div class="absolute left-0 top-1 h-2 w-2 rounded-full bg-zinc-400 dark:bg-zinc-500"></div>
                        <div class="ml-6">                <div class="text-sm font-medium text-zinc-600 dark:text-zinc-400">
                  {getFormattedDate(memo.data.date)}
                </div>
                <div class="prose prose-zinc dark:prose-invert mt-2">
                  <Content />
                </div>
              </div>
            </div>
          )
        })}
      </div>
    </div>
  </div>
</PageLayout>
